version: "2.4"
networks:
  apim_and_cc:
    name: apim_and_cc
services:
  apim:
    image: ${CHOREO_APIM_IMAGE}:latest
    ports:
      - "9763:9763"
      - "9443:9443"
      - "5672:5672"
      - "8243:8243"
    volumes:
      - ./conf/deployment.toml:/home/wso2carbon/wso2-config-volume/repository/conf/deployment.toml
    networks:
      - apim_and_cc
    environment:
      - MONGODB_CONNECTION_STRING=${MONGODB_CONNECTION_STRING}
      - MONGODB_GROUP_ID=${MONGODB_GROUP_ID}
      - MONGODB_CLUSTER_NAME=${MONGODB_CLUSTER_NAME}
      - MONGODB_PUBLIC_KEY=${MONGODB_PUBLIC_KEY}
      - MONGODB_PRIVATE_KEY=${MONGODB_PRIVATE_KEY}
      - ASB_CONNECTION_STRING=${AZURE_CONNECTION_STRING}
