version: "2.4"
networks:
  apim_and_cc:
    name: apim_and_cc
services:
  apim:
    image: wso2/choreo-product-apim:4.0
    ports:
      - "9763:9763"
      - "9443:9443"
      - "5672:5672"
      - "8243:8243"
    volumes:
      - ./conf/deployment.toml:/home/wso2carbon/wso2-config-volume/repository/conf/deployment.toml
    networks:
      - apim_and_cc
    environment:
      - MONGODB_CONNECTION_STRING=${mongodb_connection_string}
      - MONGODB_GROUP_ID=${mongodb_group_id}
      - MONGODB_CLUSTER_NAME=${mongodb_cluster_name}
      - MONGODB_PUBLIC_KEY=${mongodb_public_key}
      - MONGODB_PRIVATE_KEY=${mongodb_private_key}
      - AZURE_CONNECTION_STRING=${azure_connection_string}
  
